---
title: "ELMA: Изменение стандартного отображения воронки продаж"
description: В данной статье опишу весь процесс изменения внешнего вида воронки продаж в ELMA BPM, а так же отображение объема, так как в стандартном представлении этих данных нет.
category: blog
tag: "ELMA BPM/C#"
lang: ru
---
>Так сложилось, что в компании где я работаю, решили внедрить <a target="_blank" href="https://www.elma-bpm.ru/">ELMA BPM</a> для управления бизнес-процессами, хоть я и не спец в **ELMA BPM** и в **C#/ASP.NET**, пришлось разбираться.

Стандартное представлении воронки продаж распологается по этому пути:

```bash
[Каталог установки ELMA]\Web\Modules\EleWise.ELMA.CRM.Web\Views\SaleFunnelReport\SaleFunnel.cshtml
```

Для создания собственного представления без изменения файлов модуля нужно создать аналогичный файл `SaleFunnel.cshtml` в папке:

```bash
[Каталог установки ELMA]\UserConfig\WebApplication\Modules\EleWise.ELMA.CRM.Web\Views\SaleFunnelReport
```

Стандартная воронка продаж выглядит так (некоторые данные замазал):
![Стандартная воронка продаж](/content/images/elma-content-image-1.png "Стандартная воронка продаж")

А вот такая у нас будет, ниже данного графика останется стандартное отображение таблицы + вывод объемов по этапам (цвета блоков настраиваются в стандартных настройках воронки, синий блок - это блок при наведении на этап в воронке):
![Обновленная воронка продаж ](/content/images/elma-sales-funnel-2.png "Обновленная воронка продаж")

**Прикладываю архив, там файл SaleFunnel.cshtml и папка D3 (js библиотека для визуализации данных). <a target="_blank" href="/content/elmaSaleFunnel.zip">Скачать</a>**

Теперь пройдемся по интеграции данного архива:
- Про файл `SaleFunnel.cshtml` рассказал выше, папку `D3` размещаем в папке
```bash
[Каталог установки ELMA]\Web\Scripts
```
>В некоторых местах есть говнокод по части ELMA, есть запрос в цикле, но для текущих объемов это не сильно сказывается на производительности

И все, далее обновляем страницу и получаем отображение воронки. В файле есть небольшие стили для отображения данных, можно изменять настраивать как удобно, по-содержимому файла не буду останавливаться, если будут вопросы или проблемы пишите на <a href='mailto:me@maxkrasnov.ru'>me@maxkrasnov.ru</a>.
